<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Produk - Jaya Teknik</title>
<style>
:root {
  --primary: #004aad;
  --secondary: #0078ff;
  --accent: #25D366;
  --bg: #f5f7fa;
  --white: #ffffff;
  --text: #333;
}
* { margin:0; padding:0; box-sizing:border-box; font-family: "Poppins", sans-serif;}
body { background: var(--bg); color: var(--text); overflow-x:hidden; }
header { background: linear-gradient(90deg, var(--primary), var(--secondary)); color: var(--white); text-align:center; padding:2rem 1rem; position: relative; box-shadow:0 2px 8px rgba(0,0,0,0.15);}
header h1 { font-size:2.2rem; margin-bottom:0.4rem; }
.cart-icon { position:absolute; top:15px; right:20px; cursor:pointer; font-size:1.8rem; display:flex; align-items:center; gap:6px;}
.cart-icon span { background:white; color:var(--primary); padding:2px 6px; border-radius:50%; font-size:0.85rem; font-weight:600; }

/* Navigation */
nav { background: var(--white); box-shadow:0 2px 10px rgba(0,0,0,0.1); position:sticky; top:0; z-index:100;}
nav ul { display:flex; justify-content:center; gap:2rem; list-style:none; padding:1rem; margin:0;}
nav a { color: var(--primary); font-weight:600; text-decoration:none; transition:0.3s;}
nav a:hover, nav a.active { color: var(--secondary); border-bottom:2px solid var(--secondary); padding-bottom:4px; }

/* Filter */
.filter-container { background:#eaf2ff; padding:2rem 1rem; text-align:center; border-bottom:2px solid #dbe6ff;}
.filter-container h2 { color:var(--primary); margin-bottom:1rem; font-size:1.6rem;}
.search-bar { display:flex; justify-content:center; flex-wrap:wrap; gap:1rem;}
input, select { padding:0.6rem 1rem; border:1px solid #ccc; border-radius:8px; font-size:1rem; width:220px; outline:none; transition:0.3s;}
input:focus, select:focus { border-color: var(--secondary); }

/* Produk Grid */
.product-container { display:grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap:2rem; padding:2rem; max-width:1200px; margin:auto;}
.product-card { background: var(--white); border-radius:14px; overflow:hidden; box-shadow:0 5px 15px rgba(0,0,0,0.1); transition: all 0.3s ease; display:flex; flex-direction:column; justify-content:space-between; position:relative; }
.product-card:hover { transform: translateY(-6px); box-shadow:0 10px 25px rgba(0,0,0,0.15);}
.product-card img { width:100%; height:190px; object-fit:cover;}
.card-body { padding:1rem 1.2rem;}
.card-body h3 { color: var(--primary); font-size:1.1rem; margin-bottom:0.3rem;}
.card-body p { font-size:0.9rem; color:#555; margin-bottom:0.3rem;}
.price { font-weight:700; color: var(--secondary); font-size:1rem;}
.stock { font-size:0.85rem; color:green;}
.btn-group { display:flex; justify-content:space-between; padding:0.8rem 1rem 1.2rem;}
.btn { flex:1; text-align:center; margin:0 0.3rem; padding:0.6rem 0; border-radius:8px; font-weight:600; text-decoration:none; transition:0.3s;}
.btn-wa { background: var(--accent); color: white; }
.btn-wa:hover { background: #1ebe5d; }
.btn-order { background: var(--secondary); color:white; }
.btn-order:hover { background: var(--primary); }

/* Badge Stok Habis */
.badge-stock {
  position: absolute;
  top: 12px;
  left: 12px;
  background: red;
  color: white;
  padding: 3px 8px;
  font-size: 0.8rem;
  font-weight: 600;
  border-radius: 6px;
  z-index: 10;
}

/* Footer */
footer { background: var(--primary); color:white; text-align:center; padding:1.5rem; margin-top:3rem; }

/* Floating WA */
.wa-floating { position: fixed; bottom: 25px; right: 25px; background-color:#25D366; color:white; border-radius:50%; width:60px; height:60px; display:flex; justify-content:center; align-items:center; font-size:30px; cursor:pointer; z-index:999; transition:0.3s;}
.wa-floating:hover { background-color:#1ebe5d; transform:scale(1.1); }

/* Modal Keranjang */
.modal { display:none; position:fixed; z-index:1000; left:0; top:0; width:100%; height:100%; overflow:auto; background-color: rgba(0,0,0,0.5);}
.modal-content { background-color: var(--white); margin:5% auto; padding:2rem; border-radius:14px; max-width:480px; width:90%; text-align:center; box-shadow:0 8px 25px rgba(0,0,0,0.25); position:relative;}
.modal-content h2,h3{color:var(--primary); margin-bottom:1rem;}
#cartItems { display:flex; flex-direction:column; gap:0.8rem; max-height:300px; overflow-y:auto; margin-bottom:1rem; text-align:left;}
.cart-item { display:flex; gap:0.6rem; align-items:center; border-bottom:1px solid #eee; padding-bottom:0.5rem;}
.cart-item img { width:60px; height:60px; object-fit:cover; border-radius:6px;}
.cart-item p { margin:0; font-size:0.9rem; flex:1;}
.cart-item input { width:50px; padding:3px; }
.cart-item button { background:red; color:white; border:none; border-radius:5px; padding:3px 6px; cursor:pointer; transition:0.3s; }
.cart-item button:hover{ background:#b30000;}
.payment-options { display:flex; flex-direction: column; gap:0.8rem; margin-top:1rem;}
.payment-options button { display:flex; align-items:center; justify-content:center; gap:0.5rem; padding:0.8rem; border:none; border-radius:10px; font-weight:600; font-size:1rem; cursor:pointer; transition:0.3s;}
#codBtn{background-color:#25D366;color:white;} #codBtn:hover{background-color:#1ebe5d; transform:scale(1.05);}
#transferBtn{background-color:var(--secondary);color:white;} #transferBtn:hover{background-color:var(--primary); transform:scale(1.05);}
.close{position:absolute; top:12px; right:18px; font-size:1.6rem; cursor:pointer; color:#555;}

/* Animasi produk ke keranjang */
@keyframes flyToCart { 0% { transform: scale(1) translate(0,0); opacity:1; } 100% { transform: scale(0.1) translate(var(--dx), var(--dy)); opacity:0; } }
.flying-img { position:fixed; width:100px; height:100px; object-fit:cover; border-radius:8px; pointer-events:none; z-index:9999; }

/* Toast */
.toast {
  position: fixed;
  bottom: 30px;
  right: 30px;
  background: var(--secondary);
  color: white;
  padding: 12px 20px;
  border-radius: 8px;
  font-weight: 600;
  box-shadow: 0 4px 12px rgba(0,0,0,0.2);
  opacity: 0;
  transform: translateY(20px);
  transition: all 0.4s ease;
  z-index: 2000;
}
.toast.show { opacity: 1; transform: translateY(0); }

@media(max-width:480px){ .cart-item img{width:50px; height:50px;} .cart-item input{width:40px;} nav ul { flex-direction: column; gap:1rem; } }
</style>
<script src="https://kit.fontawesome.com/a2e0e6cf3a.js" crossorigin="anonymous"></script>
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-ND9VHDFLSY"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-ND9VHDFLSY');
</script>
</head>
<body>

<header>
  <h1>Katalog Produk</h1>
  <p>Vanbelt, Rantai & Bearing â€” Jaya Teknik</p>
  <div class="cart-icon" onclick="openCartModal()">
    <i class="fas fa-shopping-cart"></i> <span id="cartCount">0</span>
  </div>
</header>

<nav>
  <ul>
    <li><a href="index.html">Beranda</a></li>
    <li><a href="produk.html" class="active">Produk</a></li>
    <li><a href="contact.html">Kontak</a></li>
  </ul>
</nav>

<div class="filter-container">
  <h2>Filter Produk</h2>
  <div class="search-bar">
    <input type="text" id="searchInput" placeholder="Cari produk...">
    <select id="categorySelect">
      <option value="all">Semua Kategori</option>
      <option value="vanbelt">Vanbelt</option>
      <option value="rantai">Rantai</option>
      <option value="bearing">Bearing</option>
    </select>
    <select id="brandSelect">
      <option value="all">Semua Merk</option>
      <option value="bando">Bando</option>
      <option value="vpower">V-Power</option>
      <option value="mitsuboshi">Mitsuboshi</option>
      <option value="did">DID</option>
      <option value="senqcia">Senqcia</option>
      <option value="mita">Mita</option>
      <option value="cina">Cina</option>
      <option value="skf">SKF</option>
      <option value="fag">FAG</option>
      <option value="ntn">NTN</option>
    </select>
  </div>
</div>

<div class="product-container" id="productList">
  <!-- Vanbelt -->
  <div class="product-card vanbelt bando">
    <img src="https://encrypted-tbn3.gstatic.com/shopping?q=tbn:ANd9GcR-IHX2gaqy2vqaihKP_Xp3HG5uOGmLuV8Ne2ONDPNSyg5EAwFJaibjTRJJWzcdWHLuOjIW2H3hpmDi6hfKp08p5g1Bqc8FXcWjnw&usqp=CAc" alt="Vanbelt Bando">
    <div class="card-body">
      <h3>Vanbelt Bando A-45</h3>
      <p class="price">Rp.50.000</p>
      <p class="stock">Stok: Tersedia</p>
    </div>
    <div class="btn-group">
      <a href="#" class="btn btn-wa" onclick="orderWhatsApp('Vanbelt Bando A-45')">ðŸ’¬ WhatsApp</a>
      <a href="#" class="btn btn-order">ðŸ›’ Pesan Sekarang</a>
    </div>
  </div>
  <!-- Rantai -->
  <div class="product-card rantai did">
    <img src="https://image.indonetwork.co.id/products/thumbs/350x350/2022/11/23/fb0f81cc-6253-41a0-b106-b546efaab53b.jpg" alt="Rantai DID">
    <div class="card-body">
      <h3>Rantai DID RS40 Single</h3>
      <p class="price">Rp.550.000</p>
      <p class="stock">Stok: Tersedia</p>
    </div>
    <div class="btn-group">
      <a href="#" class="btn btn-wa" onclick="orderWhatsApp('Rantai DID RS40 Single')">ðŸ’¬ WhatsApp</a>
      <a href="#" class="btn btn-order">ðŸ›’ Pesan Sekarang</a>
    </div>
  </div>
  <!-- Bearing -->
  <div class="product-card bearing skf">
    <img src="https://images-cdn.ubuy.co.id/633aa34d0c41a57b27156dd0-6015-2rs-skf-brand-rubber-seal-ball.jpg" alt="SKF Bearing">
    <div class="card-body">
      <h3>SKF Ball Bearing 6203 2RS</h3>
      <p>Bearing presisi tinggi, efisiensi putaran maksimal.</p>
      <p class="price">Rp.75.000</p>
      <p class="stock">Stok: Tersedia</p>
    </div>
    <div class="btn-group">
      <a href="#" class="btn btn-wa" onclick="orderWhatsApp('SKF Ball Bearing 6203')">ðŸ’¬ WhatsApp</a>
      <a href="#" class="btn btn-order">ðŸ›’ Pesan Sekarang</a>
    </div>
  </div>
</div>

<!-- Modal Keranjang -->
<div id="cartModal" class="modal">
  <div class="modal-content">
    <span class="close">&times;</span>
    <h2>Keranjang Belanja</h2>
    <div id="cartItems"></div>
    <p><strong>Total:</strong> <span id="cartTotal">Rp 0</span></p>
    <h3>Pilih Metode Pembayaran</h3>
    <div class="payment-options">
      <button id="codBtn"><i class="fas fa-truck"></i> Cash on Delivery (COD)</button>
      <button id="transferBtn"><i class="fas fa-university"></i> Transfer Bank</button>
    </div>
  </div>
</div>

<!-- Toast -->
<div id="toast"></div>

<!-- Floating WA -->
<a href="https://wa.me/6289699025717" class="wa-floating" target="_blank">
  <i class="fab fa-whatsapp"></i>
</a>

<footer>
  <p>&copy; 2025 Jaya Teknik Indonesia | Semua Hak Dilindungi</p>
</footer>

<script>
let cart=[];

function parsePrice(priceStr){ return parseInt(priceStr.replace(/[^0-9]/g,'')); }
function formatRupiah(num){ return "Rp "+num.toLocaleString("id-ID"); }

function showToast(message){
  const toast=document.createElement("div");
  toast.className="toast";
  toast.innerText=message;
  document.body.appendChild(toast);
  setTimeout(()=>{ toast.classList.add("show"); },100);
  setTimeout(()=>{
    toast.classList.remove("show");
    setTimeout(()=>{ toast.remove(); },400);
  },2000);
}

function addToCart(card){
  const name=card.querySelector("h3").innerText;
  const price=card.querySelector(".price").innerText;
  const img=card.querySelector("img").src;
  let existing=cart.find(p=>p.name===name);
  if(existing) existing.qty+=1;
  else cart.push({name:name, price:price, img:img, qty:1});
  updateCartModal();
  showToast(`${name} berhasil ditambahkan ke keranjang!`);
}

function updateCartModal(){
  const cartItemsDiv=document.getElementById("cartItems");
  cartItemsDiv.innerHTML="";
  let total=0;
  cart.forEach((p,index)=>{
    const priceNum=parsePrice(p.price);
    const subtotal=priceNum*p.qty;
    total+=subtotal;
    const div=document.createElement("div");
    div.className="cart-item";
    div.innerHTML=`<img src="${p.img}" alt="${p.name}">
      <p>${p.name}</p>
      <input type="number" value="${p.qty}" min="1" data-index="${index}">
      <p>${formatRupiah(subtotal)}</p>
      <button data-index="${index}">Hapus</button>`;
    cartItemsDiv.appendChild(div);
  });
  document.getElementById("cartTotal").innerText=formatRupiah(total);
  document.getElementById("cartCount").innerText=cart.length;

  document.querySelectorAll("#cartItems input").forEach(input=>{
    input.addEventListener("input",function(){
      const idx=parseInt(this.dataset.index);
      cart[idx].qty=parseInt(this.value);
      updateCartModal();
    });
  });
  document.querySelectorAll("#cartItems button").forEach(btn=>{
    btn.addEventListener("click",function(){
      const idx=parseInt(this.dataset.index);
      cart.splice(idx,1);
      updateCartModal();
    });
  });
}

function openCartModal(){ document.getElementById("cartModal").style.display="block"; }
document.querySelector(".close").onclick=()=>{ document.getElementById("cartModal").style.display="none"; }
window.onclick=function(event){ if(event.target==document.getElementById("cartModal")){ document.getElementById("cartModal").style.display="none"; } }

function flyToCart(img, callback){
  const cartIcon=document.querySelector(".cart-icon");
  const rectCart=cartIcon.getBoundingClientRect();
  const rectImg=img.getBoundingClientRect();
  const clone=img.cloneNode(true);
  clone.classList.add("flying-img");
  document.body.appendChild(clone);
  clone.style.left=rectImg.left+"px";
  clone.style.top=rectImg.top+"px";
  clone.style.setProperty("--dx",(rectCart.left-rectImg.left)+"px");
  clone.style.setProperty("--dy",(rectCart.top-rectImg.top)+"px");
  clone.style.animation="flyToCart 0.8s forwards";
  clone.addEventListener("animationend",()=>{ clone.remove(); callback(); });
}

document.querySelectorAll(".btn-order").forEach(btn=>{
  btn.addEventListener("click",function(e){
    e.preventDefault();
    const card=this.closest(".product-card");
    const img=card.querySelector("img");
    flyToCart(img,()=>{ addToCart(card); openCartModal(); });
  });
});

function sendCartWhatsApp(method){
  if(cart.length===0) return alert("Keranjang kosong!");
  const phone="6289699025717";
  let message="Halo Jaya Teknik, saya ingin memesan:\n";
  cart.forEach(p=>{
    const subtotal=formatRupiah(parsePrice(p.price)*p.qty);
    message+=`- ${p.name} x${p.qty} = ${subtotal}\n`;
  });
  const total=formatRupiah(cart.reduce((a,p)=>a+parsePrice(p.price)*p.qty,0));
  message+=`Total: ${total}\n`;
  message+=method==="COD"?"Pembayaran: COD":"Pembayaran: Transfer Bank";
  window.open(`https://wa.me/${phone}?text=${encodeURIComponent(message)}`,"_blank");
  cart=[]; updateCartModal(); document.getElementById("cartModal").style.display="none";
}

document.getElementById("codBtn").addEventListener("click",()=>sendCartWhatsApp("COD"));
document.getElementById("transferBtn").addEventListener("click",()=>sendCartWhatsApp("Transfer"));

function orderWhatsApp(productName){
  const phone="6289699025717";
  const message=`Halo Jaya Teknik, saya ingin menanyakan produk: ${productName}. Apakah tersedia?`;
  window.open(`https://wa.me/${phone}?text=${encodeURIComponent(message)}`,"_blank");
}

// Filter Produk
function searchProducts(){
  const searchText=document.getElementById("searchInput").value.toLowerCase();
  const category=document.getElementById("categorySelect").value;
  const brand=document.getElementById("brandSelect").value;
  const products=document.querySelectorAll(".product-card");
  products.forEach(product=>{
    const textMatch=product.innerText.toLowerCase().includes(searchText);
    const categoryMatch=category==="all" || product.classList.contains(category);
    const brandMatch=brand==="all" || product.classList.contains(brand);
    product.style.display=(textMatch && categoryMatch && brandMatch)?"block":"none";
  });
}
document.querySelectorAll("#searchInput,#categorySelect,#brandSelect").forEach(el=>el.addEventListener("input",searchProducts));

// Badge stok habis otomatis
document.querySelectorAll(".product-card").forEach(card=>{
  const stockText=card.querySelector(".stock").innerText.toLowerCase();
  if(stockText!=="stok: tersedia"){
    if(!card.querySelector(".badge-stock")){
      const badge=document.createElement("div");
      badge.className="badge-stock";
      badge.innerText="Stok Habis";
      card.appendChild(badge);
      card.querySelector(".btn-order").style.pointerEvents="none";
      card.querySelector(".btn-order").style.opacity="0.6";
    }
  }
});
</script>
</body>
</html>
